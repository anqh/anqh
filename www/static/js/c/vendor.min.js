!function($){"use strict";$(function(){$.support.transition=function(){var transitionEnd=function(){var name,el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(name in transEndEventNames)if(void 0!==el.style[name])return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery),!function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed").remove()}var $parent,$this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=$(selector),e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");data||$this.data("alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.alert.data-api",dismiss,Alert.prototype.close)}(window.jQuery),!function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout(function(){"loadingText"==state?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)},Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active"),this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options="object"==typeof option&&option;data||$this.data("button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.defaults={loadingText:"loading..."},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle")})}(window.jQuery),!function($){"use strict";var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(!(pos>this.$items.length-1||0>pos))return this.sliding?this.$element.one("slid",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition.end&&(this.$element.trigger($.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(type,next){var e,$active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(this.sliding=!0,isCycling&&this.pause(),$next=$next.length?$next:this.$element.find(".item")[fallback](),e=$.Event("slide",{relatedTarget:$next[0],direction:direction}),!$next.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(e),e.isDefaultPrevented())return;$next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger("slid")},0)})}else{if(this.$element.trigger(e),e.isDefaultPrevented())return;$active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return isCycling&&this.cycle(),this}}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})},$.fn.carousel.defaults={interval:5e3,pause:"hover"},$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this},$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var href,slideIndex,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data());$target.carousel(options),(slideIndex=$this.attr("data-slide-to"))&&$target.data("carousel").pause().to(slideIndex).cycle(),e.preventDefault()})}(window.jQuery),!function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.collapse.defaults,options),this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(!this.transitioning&&!this.$element.hasClass("in")){if(dimension=this.dimension(),scroll=$.camelCase(["scroll",dimension].join("-")),actives=this.$parent&&this.$parent.find("> .accordion-group > .in"),actives&&actives.length){if(hasData=actives.data("collapse"),hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("collapse",null)}this.$element[dimension](0),this.transition("addClass",$.Event("show"),"shown"),$.support.transition&&this.$element[dimension](this.$element[0][scroll])}},hide:function(){var dimension;!this.transitioning&&this.$element.hasClass("in")&&(dimension=this.dimension(),this.reset(this.$element[dimension]()),this.transition("removeClass",$.Event("hide"),"hidden"),this.$element[dimension](0))},reset:function(size){var dimension=this.dimension();return this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth,this.$element[null!==size?"addClass":"removeClass"]("collapse"),this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){"show"==startEvent.type&&that.reset(),that.transitioning=0,that.$element.trigger(completeEvent)};this.$element.trigger(startEvent),startEvent.isDefaultPrevented()||(this.transitioning=1,this.$element[method]("in"),$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=$.extend({},$.fn.collapse.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.defaults={toggle:!0},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed"),$(target).collapse(option)})}(window.jQuery),!function($){"use strict";function clearMenus(){$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var $parent,selector=$this.attr("data-target");return selector||(selector=$this.attr("href"),selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=selector&&$(selector),$parent&&$parent.length||($parent=$this.parent()),$parent}var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(){var $parent,isActive,$this=$(this);if(!$this.is(".disabled, :disabled"))return $parent=getParent($this),isActive=$parent.hasClass("open"),clearMenus(),isActive||$parent.toggleClass("open"),$this.focus(),!1},keydown:function(e){var $this,$items,$parent,isActive,index;if(/(38|40|27)/.test(e.keyCode)&&($this=$(this),e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled"))){if($parent=getParent($this),isActive=$parent.hasClass("open"),!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();$items=$("[role=menu] li:not(.divider):visible a",$parent),$items.length&&(index=$items.index($items.filter(":focus")),38==e.keyCode&&index>0&&index--,40==e.keyCode&&$items.length-1>index&&index++,~index||(index=0),$items.eq(index).focus())}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");data||$this.data("dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery),!function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus(),transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=$.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){that.$element[0]===e.target||that.$element.has(e.target).length||that.$element.focus()})},escape:function(){var that=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&that.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end),that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout),that.hideModal()})},hideModal:function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()):callback&&callback()}};var old=$.fn.modal;$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("modal",data=new Modal(this,options)),"string"==typeof option?data[option]():options.show&&data.show()})},$.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault(),$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery),!function($){"use strict";var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;for(this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.enabled=!0,triggers=this.options.trigger.split(" "),i=triggers.length;i--;)trigger=triggers[i],"click"==trigger?this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this)):"manual"!=trigger&&(eventIn="hover"==trigger?"mouseenter":"focus",eventOut="hover"==trigger?"mouseleave":"blur",this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this)));this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){return options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},enter:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);return self.options.delay&&self.options.delay.show?(clearTimeout(this.timeout),self.hoverState="in",this.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show),void 0):self.show()},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),self.options.delay&&self.options.delay.hide?(self.hoverState="out",this.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide),void 0):self.hide()},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;switch($tip=this.tip(),this.setContent(),this.options.animation&&$tip.addClass("fade"),placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,$tip.detach().css({top:0,left:0,display:"block"}),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}this.applyPlacement(tp,placement),this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var actualWidth,actualHeight,delta,replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight;$tip.offset(offset).addClass(placement).addClass("in"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight,replace=!0),"bottom"==placement||"top"==placement?(delta=0,0>offset.left&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")):this.replaceArrow(actualHeight-height,actualHeight,"top"),replace&&$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},hide:function(){function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout),$tip.detach()})}var $tip=this.tip(),e=$.Event("hide");return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},tip:function(){return this.$tip=this.$tip||$(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options="object"==typeof option&&option;data||$this.data("tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]()})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(window.jQuery),!function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"html":"text"](content),$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;return content=("function"==typeof o.content?o.content.call($e[0]):o.content)||$e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options="object"==typeof option&&option;data||$this.data("popover",data=new Popover(this,options)),"string"==typeof option&&data[option]()})},$.fn.popover.Constructor=Popover,$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(window.jQuery),!function($){"use strict";function ScrollSpy(element,options){var href,process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element);this.options=$.extend({},$.fn.scrollspy.defaults,options),this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process),this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=$("body"),this.refresh(),this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var $targets,self=this;this.offsets=$([]),this.targets=$([]),$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]),self.targets.push(this[1])})},process:function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||offsets[i+1]>=scrollTop)&&this.activate(targets[i])},activate:function(target){var active,selector;this.activeTarget=target,$(this.selector).parent(".active").removeClass("active"),selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parent("li").addClass("active"),active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate")}};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options="object"==typeof option&&option;data||$this.data("scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})},$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.defaults={offset:10},$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery),!function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var previous,$target,e,$this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),$this.parent("li").hasClass("active")||(previous=$ul.find(".active:last a")[0],e=$.Event("show",{relatedTarget:previous}),$this.trigger(e),e.isDefaultPrevented()||($target=$(selector),this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})))},activate:function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next):next(),$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");data||$this.data("tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})}(window.jQuery),!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.typeahead.defaults,options),this.options.target&&(this.$target=$(this.options.target)),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.strict=this.options.strict,this.$menu=$(this.options.menu),this.shown=!1,"string"==typeof this.source&&(this.url=this.source,this.source=this.searchAjax),"SELECT"==element.nodeName&&this.replaceSelect(),this.text=this.$element.val(),this.$element.attr("data-text",this.value).attr("autocomplete","off"),this.$target!==void 0?this.$element.attr("data-value",this.$target.val()):this.$element.attr("data-value")===void 0&&this.$element.attr("data-value",this.strict?"":this.value),this.$menu.css("min-width",this.$element.width()+12),this.listen()};Typeahead.prototype={constructor:Typeahead,replaceSelect:function(){this.$target=this.$element,this.$element=$('<input type="text" />'),this.source={},this.strict=!0;for(var $option,options=this.$target.find("option"),i=0;options.length>i;i++)$option=$(options[i]),""!==$option.val()?(this.source[$option.val()]=$option.html(),this.$target.val()==$option.val()&&this.$element.val($option.html())):this.$element.attr("placeholder",$option.html());var attr=this.$target[0].attributes;for(i=0;attr.length>i;i++)"type"==attr[i].nodeName||"name"==attr[i].nodeName||"id"==attr[i].nodeName||"data-provide"==attr[i].nodeName||attr[i].nodeName.match(/^on/)||this.$element.attr(attr[i].nodeName,attr[i].nodeValue);this.$element.insertAfter(this.$target),this.$target.attr("autofocus")&&this.$element.trigger("focus").select(),this.$target.attr("autofocus",!1),this.$target.hide()},destroyReplacement:function(){this.$target!==void 0&&"SELECT"==this.$target[0].nodeName&&this.$element.replaceWith("")},select:function(){var li=this.$menu.find(".active"),val=li.attr("data-value"),text=li.find(".item-text").length>0?li.find(".item-text").text():li.text();return val=this.updater(val,"value"),text=this.updater(text,"text"),this.$element.val(text).attr("data-value",val),this.text=text,this.$target!==void 0&&this.$target.val(val).trigger("change"),this.$element.trigger("change"),this.hide()},updater:function(text){return text},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var items;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,items?this.process(items):this)},process:function(items){return $.isArray(items)?this.processArray(items):this.processObject(items)},processArray:function(items){var that=this;return items=$.grep(items,function(item){return that.matcher(item)}),items=this.sorter(items),items.length?this.render(items.slice(0,this.options.items)).show():this.shown?this.hide():this},processObject:function(itemsIn){var that=this,items={},i=0;return $.each(itemsIn,function(key,item){that.matcher(item)&&(items[key]=item)}),items=this.sorter(items),$.isEmptyObject(items)?this.shown?this.hide():this:($.each(items,function(key){i++>=that.options.items&&delete items[key]}),this.render(items).show())},searchAjax:function(query,process){var that=this;this.ajaxTimeout&&clearTimeout(this.ajaxTimeout),this.ajaxTimeout=setTimeout(function(){return that.ajaxTimeout&&clearTimeout(that.ajaxTimeout),""===query?(that.hide(),void 0):($.get(that.url,{q:query,limit:that.options.items},function(items){"string"==typeof items&&(items=JSON.parse(items)),process(items)}),void 0)},this.options.ajaxdelay)},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){return $.isArray(items)?this.sortArray(items):this.sortObject(items)},sortArray:function(items){for(var item,beginswith=[],caseSensitive=[],caseInsensitive=[];item=items.shift();)item.toLowerCase().indexOf(this.query.toLowerCase())?~item.indexOf(this.query)?caseSensitive.push(item):caseInsensitive.push(item):beginswith.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},sortObject:function(items){var key,sorted={};for(key in items)items[key].toLowerCase().indexOf(this.query.toLowerCase())||(sorted[key]=items[key],delete items[key]);for(key in items)~items[key].indexOf(this.query)&&(sorted[key]=items[key],delete items[key]);for(key in items)sorted[key]=items[key];return sorted},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this,list=$([]);return $.map(items,function(item,value){if(!(list.length>=that.options.items)){var li,a;$.isArray(items)&&(value=item),li=$(that.options.item),a=li.find("a").length?li.find("a"):li,a.html(that.highlighter(item)),li.attr("data-value",value),0===li.find("a").length&&li.addClass("dropdown-header"),list.push(li[0])
}}),list.not(".dropdown-header").first().addClass("active"),this.$menu.html(list),this},next:function(){var active=this.$menu.find(".active").removeClass("active"),next=active.nextAll("li:not(.dropdown-header)").first();next.length||(next=$(this.$menu.find("li:not(.dropdown-header)")[0])),next.addClass("active")},prev:function(){var active=this.$menu.find(".active").removeClass("active"),prev=active.prevAll("li:not(.dropdown-header)").first();prev.length||(prev=this.$menu.find("li:not(.dropdown-header)").last()),prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("change",$.proxy(this.change,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this)),$(window).on("unload",$.proxy(this.destroyReplacement,this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;return isSupported||(this.$element.setAttribute(eventName,"return;"),isSupported="function"==typeof this.$element[eventName]),isSupported},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},change:function(){var value;this.$element.val()!=this.text&&(value=""===this.$element.val()||this.strict?"":this.$element.val(),this.$element.val(value),this.$element.attr("data-value",value),this.text=value,this.$target!==void 0&&this.$target.val(value))},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options="object"==typeof option&&option;data||$this.data("typeahead",data=new Typeahead(this,options)),"string"==typeof option&&data[option]()})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',ajaxdelay:400,minLength:1},$.fn.typeahead.Constructor=Typeahead,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this},$(document).off("focus.typeahead.data-api").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);$this.data("typeahead")||($this.is("select")&&$this.attr("autofocus",!0),e.preventDefault(),$this.typeahead($this.data()))})}(window.jQuery),!function($){"use strict";var isIphone=void 0!==window.orientation,isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>-1,Inputmask=function(element,options){isAndroid||(this.$element=$(element),this.options=$.extend({},$.fn.inputmask.defaults,options),this.mask=options.mask+"",this.init(),this.listen(),this.checkVal())};Inputmask.prototype={init:function(){var defs=this.options.definitions,len=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,$.each(this.mask.split(""),$.proxy(function(i,c){"?"==c?(len--,this.partialPosition=i):defs[c]?(this.tests.push(RegExp(defs[c])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=$.map(this.mask.split(""),$.proxy(function(c){return"?"!=c?defs[c]?this.options.placeholder:c:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",$.proxy(function(){return $.map(this.buffer,function(c,i){return this.tests[i]&&c!=this.options.placeholder?c:null}).join("")},this))},listen:function(){if(!this.$element.attr("readonly")){var pasteEventName=(navigator.userAgent.match(/msie/i)?"paste":"input")+".mask";this.$element.on("unmask",$.proxy(this.unmask,this)).on("focus.mask",$.proxy(this.focusEvent,this)).on("blur.mask",$.proxy(this.blurEvent,this)).on("keydown.mask",$.proxy(this.keydownEvent,this)).on("keypress.mask",$.proxy(this.keypressEvent,this)).on(pasteEventName,$.proxy(this.pasteEvent,this))}},caret:function(begin,end){if(0!==this.$element.length){if("number"==typeof begin)return end="number"==typeof end?end:begin,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(begin,end);else if(this.createTextRange){var range=this.createTextRange();range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select()}});if(this.$element[0].setSelectionRange)begin=this.$element[0].selectionStart,end=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-1e5),end=begin+range.text.length}return{begin:begin,end:end}}},seekNext:function(pos){for(var len=this.mask.length;len>=++pos&&!this.tests[pos];);return pos},seekPrev:function(pos){for(;--pos>=0&&!this.tests[pos];);return pos},shiftL:function(begin,end){var len=this.mask.length;if(!(0>begin)){for(var i=begin,j=this.seekNext(end);len>i;i++)if(this.tests[i]){if(!(len>j&&this.tests[i].test(this.buffer[j])))break;this.buffer[i]=this.buffer[j],this.buffer[j]=this.options.placeholder,j=this.seekNext(j)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,begin))}},shiftR:function(pos){for(var len=this.mask.length,i=pos,c=this.options.placeholder;len>i;i++)if(this.tests[i]){var j=this.seekNext(i),t=this.buffer[i];if(this.buffer[i]=c,!(len>j&&this.tests[j].test(t)))break;c=t}},unmask:function(){this.$element.unbind(".mask").removeData("inputmask")},focusEvent:function(){this.focusText=this.$element.val();var len=this.mask.length,pos=this.checkVal();this.writeBuffer();var that=this,moveCaret=function(){pos==len?that.caret(0,pos):that.caret(pos)};$.browser.msie?moveCaret():setTimeout(moveCaret,0)},blurEvent:function(){this.checkVal(),this.$element.val()!=this.focusText&&this.$element.trigger("change")},keydownEvent:function(e){var k=e.which;if(8==k||46==k||isIphone&&127==k){var pos=this.caret(),begin=pos.begin,end=pos.end;return 0===end-begin&&(begin=46!=k?this.seekPrev(begin):end=this.seekNext(begin-1),end=46==k?this.seekNext(end):end),this.clearBuffer(begin,end),this.shiftL(begin,end-1),!1}return 27==k?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},keypressEvent:function(e){var len=this.mask.length,k=e.which,pos=this.caret();if(e.ctrlKey||e.altKey||e.metaKey||32>k)return!0;if(k){0!==pos.end-pos.begin&&(this.clearBuffer(pos.begin,pos.end),this.shiftL(pos.begin,pos.end-1));var p=this.seekNext(pos.begin-1);if(len>p){var c=String.fromCharCode(k);if(this.tests[p].test(c)){this.shiftR(p),this.buffer[p]=c,this.writeBuffer();var next=this.seekNext(p);this.caret(next)}}return!1}},pasteEvent:function(){var that=this;setTimeout(function(){that.caret(that.checkVal(!0))},0)},clearBuffer:function(start,end){for(var len=this.mask.length,i=start;end>i&&len>i;i++)this.tests[i]&&(this.buffer[i]=this.options.placeholder)},writeBuffer:function(){return this.$element.val(this.buffer.join("")).val()},checkVal:function(allow){for(var len=this.mask.length,test=this.$element.val(),lastMatch=-1,i=0,pos=0;len>i;i++)if(this.tests[i]){for(this.buffer[i]=this.options.placeholder;pos++<test.length;){var c=test.charAt(pos-1);if(this.tests[i].test(c)){this.buffer[i]=c,lastMatch=i;break}}if(pos>test.length)break}else this.buffer[i]==test.charAt(pos)&&i!=this.partialPosition&&(pos++,lastMatch=i);return!allow&&this.partialPosition>lastMatch+1?(this.$element.val(""),this.clearBuffer(0,len)):(allow||lastMatch+1>=this.partialPosition)&&(this.writeBuffer(),allow||this.$element.val(this.$element.val().substring(0,lastMatch+1))),this.partialPosition?i:this.firstNonMaskPos}},$.fn.inputmask=function(options){return this.each(function(){var $this=$(this),data=$this.data("inputmask");data||$this.data("inputmask",data=new Inputmask(this,options))})},$.fn.inputmask.defaults={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."}},$.fn.inputmask.Constructor=Inputmask,$(document).on("focus.inputmask.data-api","[data-mask]",function(e){var $this=$(this);$this.data("inputmask")||(e.preventDefault(),$this.inputmask($this.data()))})}(window.jQuery),!function($){"use strict";var Rowlink=function(element,options){options=$.extend({},$.fn.rowlink.defaults,options);var tr="tr"==element.nodeName.toLowerCase()?$(element):$(element).find("tr:has(td)");tr.each(function(){var link=$(this).find(options.target).first();if(link.length){var href=link.attr("href");$(this).find("td").not(".nolink").click(function(){window.location=href}),$(this).addClass("rowlink"),link.replaceWith(link.html())}})};$.fn.rowlink=function(options){return this.each(function(){var $this=$(this),data=$this.data("rowlink");data||$this.data("rowlink",data=new Rowlink(this,options))})},$.fn.rowlink.defaults={target:"a"},$.fn.rowlink.Constructor=Rowlink,$(function(){$('[data-provides="rowlink"]').each(function(){$(this).rowlink($(this).data())})})}(window.jQuery),!function($){"use strict";var Fileupload=function(element,options){if(this.$element=$(element),this.type=this.$element.data("uploadtype")||(this.$element.find(".thumbnail").length>0?"image":"file"),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||options.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=$('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileupload-preview");var height=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=height&&"none"!=height&&this.$preview.css("line-height",height),this.original={exists:this.$element.hasClass("fileupload-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.$remove=this.$element.find('[data-dismiss="fileupload"]'),this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",$.proxy(this.trigger,this)),this.listen()}};Fileupload.prototype={listen:function(){this.$input.on("change.fileupload",$.proxy(this.change,this)),$(this.$input[0].form).on("reset.fileupload",$.proxy(this.reset,this)),this.$remove&&this.$remove.on("click.fileupload",$.proxy(this.clear,this))},change:function(e,invoked){if("clear"!==invoked){var file=void 0!==e.target.files?e.target.files[0]:e.target.value?{name:e.target.value.replace(/^.+\\/,"")}:null;if(!file)return this.clear(),void 0;if(this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name),"image"===this.type&&this.$preview.length>0&&(file.type!==void 0?file.type.match("image.*"):file.name.match("\\.(gif|png|jpe?g)$"))&&"undefined"!=typeof FileReader){var reader=new FileReader,preview=this.$preview,element=this.$element;reader.onload=function(e){preview.html('<img src="'+e.target.result+'" '+("none"!=preview.css("max-height")?'style="max-height: '+preview.css("max-height")+';"':"")+" />"),element.addClass("fileupload-exists").removeClass("fileupload-new")},reader.readAsDataURL(file)}else this.$preview.text(file.name),this.$element.addClass("fileupload-exists").removeClass("fileupload-new")}},clear:function(e){if(this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),navigator.userAgent.match(/msie/i)){var inputClone=this.$input.clone(!0);this.$input.after(inputClone),this.$input.remove(),this.$input=inputClone}else this.$input.val("");this.$preview.html(""),this.$element.addClass("fileupload-new").removeClass("fileupload-exists"),e&&(this.$input.trigger("change",["clear"]),e.preventDefault())},reset:function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.original.exists?this.$element.addClass("fileupload-exists").removeClass("fileupload-new"):this.$element.addClass("fileupload-new").removeClass("fileupload-exists")},trigger:function(e){this.$input.trigger("click"),e.preventDefault()}},$.fn.fileupload=function(options){return this.each(function(){var $this=$(this),data=$this.data("fileupload");data||$this.data("fileupload",data=new Fileupload(this,options)),"string"==typeof options&&data[options]()})},$.fn.fileupload.Constructor=Fileupload,$(document).on("click.fileupload.data-api",'[data-provides="fileupload"]',function(e){var $this=$(this);if(!$this.data("fileupload")){$this.fileupload($this.data());var $target=$(e.target).closest('[data-dismiss="fileupload"],[data-trigger="fileupload"]');$target.length>0&&($target.trigger("click.fileupload"),e.preventDefault())}})}(window.jQuery),!function($){"use strict";var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options),this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this)),this.$element=$(element),this.checkPosition()};Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var affix,scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom";"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top()),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom()),affix=null!=this.unpin&&scrollTop+this.unpin<=position.top?!1:null!=offsetBottom&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":null!=offsetTop&&offsetTop>=scrollTop?"top":!1,this.affixed!==affix&&(this.affixed=affix,this.unpin="bottom"==affix?position.top-scrollTop:null,this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:"")))}};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options="object"==typeof option&&option;data||$this.data("affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})},$.fn.affix.Constructor=Affix,$.fn.affix.defaults={offset:0},$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},data.offsetBottom&&(data.offset.bottom=data.offsetBottom),data.offsetTop&&(data.offset.top=data.offsetTop),$spy.affix(data)})})}(window.jQuery),function($){$.fn.markItUp=function(settings,extraSettings){var options,ctrlKey,shiftKey,altKey;return ctrlKey=shiftKey=altKey=!1,options={id:"",nameSpace:"",root:"",previewInWindow:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,extraSettings),options.root||$("script").each(function(a,tag){miuScript=$(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),null!==miuScript&&(options.root=miuScript[1])}),this.each(function(){function localize(data,inText){return inText?data.replace(/("|')~\//g,"$1"+options.root):data.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),options.resizeHandle===!0&&$.browser.safari!==!0&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown",function(e){var mouseMove,mouseUp,h=$$.height(),y=e.clientY;mouseMove=function(e){return $$.css("height",Math.max(20,e.clientY+h-y)+"px"),!1},mouseUp=function(){return $("html").unbind("mousemove",mouseMove).unbind("mouseup",mouseUp),!1},$("html").bind("mousemove",mouseMove).bind("mouseup",mouseUp)}),footer.append(resizeHandle)),$$.keydown(keyPressed).keyup(keyPressed),$$.bind("insertion",function(e,settings){settings.target!==!1&&get(),textarea===$.markItUp.focused&&markup(settings)}),$$.focus(function(){$.markItUp.focused=this})}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;if(title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"",button.separator)li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);else{for(i++,j=levels.length-1;j>=0;j--)t+=levels[j]+"-";li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.text||button.name||"")+"</a></li>").bind("contextmenu",function(){return!1}).click(function(){return!1}).bind("focusin",function(){$$.focus()}).mouseup(function(){return button.call&&eval(button.call)(),setTimeout(function(){markup(button)},1),!1}).hover(function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})},function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul}function magicMarkups(string){return string?(string=""+string,string=string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(x,a){var b=a.split("|!|");return altKey===!0?void 0!==b[1]?b[1]:b[0]:void 0===b[1]?"":b[0]}),string=string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(x,a){var b=a.split(":!:");return abort===!0?!1:(value=prompt(b[0],b[1]?b[1]:""),null===value&&(abort=!0),value)})):""}function prepare(action){return $.isFunction(action)&&(action=action(hash)),magicMarkups(action)}function build(string){var openWith=prepare(clicked.openWith),placeHolder=prepare(clicked.placeHolder),replaceWith=prepare(clicked.replaceWith),closeWith=prepare(clicked.closeWith),openBlockWith=prepare(clicked.openBlockWith),closeBlockWith=prepare(clicked.closeBlockWith),multiline=clicked.multiline;if(""!==replaceWith)block=openWith+replaceWith+closeWith;else if(""===selection&&""!==placeHolder)block=openWith+placeHolder+closeWith;else{string=string||selection;var lines=[string],blocks=[];multiline===!0&&(lines=string.split(/\r?\n/));for(var l=0;lines.length>l;l++){line=lines[l];var trailingSpaces;(trailingSpaces=line.match(/ *$/))?blocks.push(openWith+line.replace(/ *$/g,"")+closeWith+trailingSpaces):blocks.push(openWith+line+closeWith)}block=blocks.join("\n")}return block=openBlockWith+block+closeBlockWith,{block:block,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith}}function markup(button){var len,j,n,i;if(hash=clicked=button,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(ctrlKey===!0&&shiftKey===!0||button.multiline===!0)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),ctrlKey===!0&&shiftKey===!0){for(lines=selection.split(/\r?\n/),j=0,n=lines.length,i=0;n>i;i++)""!==$.trim(lines[i])?($.extend(hash,{line:++j,selection:lines[i]}),lines[i]=build(lines[i]).block):lines[i]="";string={block:lines.join("\n")},start=caretPosition,len=string.block.length+($.browser.opera?n-1:0)}else ctrlKey===!0?(string=build(selection),start=caretPosition+string.openWith.length,len=string.block.length-string.openWith.length-string.closeWith.length,len-=string.block.match(/ $/)?1:0,len-=fixIeBug(string.block)):shiftKey===!0?(string=build(selection),start=caretPosition,len=string.block.length,len-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,len=0,start-=fixIeBug(string.block));""===selection&&""===string.replaceWith&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openWith.length,len=string.block.length-string.openWith.length-string.closeWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&abort===!1?(insert(string.block),set(start,len)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(ctrlKey===!0&&shiftKey===!0||button.multiline===!0)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1}function fixOperaBug(string){return $.browser.opera?string.length-string.replace(/\n*/g,"").length:0}function fixIeBug(string){return $.browser.msie?string.length-string.replace(/\r*/g,"").length:0}function insert(block){if(document.selection){var newSelection=document.selection.createRange();newSelection.text=block}else textarea.value=textarea.value.substring(0,caretPosition)+block+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}function set(start,len){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&0==len)return!1;range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",start),range.moveEnd("character",len),range.select()}else textarea.setSelectionRange&&textarea.setSelectionRange(start,start+len);textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection)if(selection=document.selection.createRange().text,$.browser.msie){var range=document.selection.createRange(),rangeCopy=range.duplicate();for(rangeCopy.moveToElementText(textarea),caretPosition=-1;rangeCopy.inRange(range);)rangeCopy.moveStart("character"),caretPosition++}else caretPosition=textarea.selectionStart;else caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd);return selection}function preview(){!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload(function(){previewWindow.close()})):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):altKey===!0&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()}function refreshPreview(){renderPreview()}function renderPreview(){if(options.previewParser&&"function"==typeof options.previewParser){var data=options.previewParser($$.val());writeInPreview(localize(data,1))}else""!==options.previewParserPath?$.ajax({type:"POST",dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(data){writeInPreview(localize(data,1))}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(data){writeInPreview(localize(data,1).replace(/<!-- content -->/g,$$.val()))}});return!1}function writeInPreview(data){if(previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open(),previewWindow.document.write(data),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp}}function keyPressed(e){if(shiftKey=e.shiftKey,altKey=e.altKey,ctrlKey=e.altKey&&e.ctrlKey?!1:e.ctrlKey||e.metaKey,"keydown"===e.type){if(ctrlKey===!0&&(li=$('a[accesskey="'+String.fromCharCode(e.keyCode)+'"]',header).parent("li"),0!==li.length))return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mouseup")},1),!1;if(13===e.keyCode||10===e.keyCode)return ctrlKey===!0?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):shiftKey===!0?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault);if(9===e.keyCode)return 1==shiftKey||1==ctrlKey||1==altKey?!1:-1!==caretOffset?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault)}}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),init()})},$.fn.markItUpRemove=function(){return this.each(function(){var $$=$(this).unbind().removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$)})},$.markItUp=function(settings){var options={target:!1};return $.extend(options,settings),options.target?$(options.target).each(function(){$(this).focus(),$(this).trigger("insertion",[options])}):($("textarea").trigger("insertion",[options]),void 0)}}(jQuery),bbCodeSettings={nameSpace:"bbcode",onTab:{keepDefault:!1,replaceWith:"	"},markupSet:[{name:"Bold",text:'<i class="icon-bold"></i>',className:"btn btn-link button-bold",key:"B",openWith:"[b]",closeWith:"[/b]"},{name:"Italic",text:'<i class="icon-italic"></i>',className:"btn btn-link button-italic",key:"I",openWith:"[i]",closeWith:"[/i]"},{name:"Picture",text:'<i class="icon-picture"></i>',className:"btn btn-link button-picture",key:"P",replaceWith:"[img][![URL]!][/img]"},{name:"Link",text:'<i class="icon-link"></i>',className:"btn btn-link button-link",key:"L",openWith:"[url=[![URL]!]]",closeWith:"[/url]",placeHolder:"http://"},{name:"Align left",text:'<i class="icon-align-left"></i>',className:"btn btn-link button-align-left",openWith:"[left]",closeWith:"[/left]"},{name:"Align center",text:'<i class="icon-align-center"></i>',className:"btn btn-link button-align-center",openWith:"[center]",closeWith:"[/center]"},{name:"Align right",text:'<i class="icon-align-right"></i>',className:"btn btn-link button-align-right",openWith:"[right]",closeWith:"[/right]"},{name:"Bulleted list",text:'<i class="icon-list-ul"></i>',className:"btn btn-link button-list-bullets",openWith:"[list]\n[*]",closeWith:"\n[/list]"},{name:"Numbered list",text:'<i class="icon-list-ol"></i>',className:"btn btn-link button-list-numbers",openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]"},{name:"Smileys",text:'<i class="icon-smile"></i>',className:"btn btn-link button-list-numbers",beforeInsert:function(cb){var $smileys=$(cb.textarea).closest("form").find(".smileys");$smileys.length&&($smileys.find(".lazy").lazyload({event:"lazy",skip_invisible:!1}),$smileys.on("shown",function(){$smileys.find(".lazy").trigger("lazy")}).collapse("toggle"))}}]},function(f){function p(a,b,c){var h=c.relative?a.position().top:a.offset().top,e=c.relative?a.position().left:a.offset().left,i=c.position[0];h-=b.outerHeight()-c.offset[0],e+=a.outerWidth()+c.offset[1];var j=b.outerHeight()+a.outerHeight();return"center"==i&&(h+=j/2),"bottom"==i&&(h+=j),i=c.position[1],a=b.outerWidth()+a.outerWidth(),"center"==i&&(e-=a/2),"left"==i&&(e-=a),{top:h,left:e}}function t(a,b){var e,k,c=this,h=a.add(c),i=0,j=0,m=a.attr("title"),q=n[b.effect],r=a.is(":input"),u=r&&a.is(":checkbox, :radio, select, :button, :submit"),s=a.attr("type"),l=b.events[s]||b.events[r?u?"widget":"input":"def"];if(!q)throw'Nonexistent effect "'+b.effect+'"';if(l=l.split(/,\s*/),2!=l.length)throw"Tooltip: bad events configuration for "+s;a.bind(l[0],function(d){clearTimeout(i),b.predelay?j=setTimeout(function(){c.show(d)},b.predelay):c.show(d)}).bind(l[1],function(d){clearTimeout(j),b.delay?i=setTimeout(function(){c.hide(d)},b.delay):c.hide(d)}),m&&b.cancelDefault&&(a.removeAttr("title"),a.data("title",m)),f.extend(c,{show:function(d){if(!e&&(m?e=f(b.layout).addClass(b.tipClass).appendTo(document.body).hide().append(m):b.tip?e=f(b.tip).eq(0):(e=a.next(),e.length||(e=a.parent().next())),!e.length))throw"Cannot find tooltip for "+a;if(c.isShown())return c;e.stop(!0,!0);var g=p(a,e,b);return d=d||f.Event(),d.type="onBeforeShow",h.trigger(d,[g]),d.isDefaultPrevented()?c:(g=p(a,e,b),e.css({position:"absolute",top:g.top,left:g.left}),k=!0,q[0].call(c,function(){d.type="onShow",k="full",h.trigger(d)}),g=b.events.tooltip.split(/,\s*/),e.bind(g[0],function(){clearTimeout(i),clearTimeout(j)}),g[1]&&!a.is("input:not(:checkbox, :radio), textarea")&&e.bind(g[1],function(o){o.relatedTarget!=a[0]&&a.trigger(l[1].split(" ")[0])}),c)},hide:function(d){return e&&c.isShown()?(d=d||f.Event(),d.type="onBeforeHide",h.trigger(d),d.isDefaultPrevented()?void 0:(k=!1,n[b.effect][1].call(c,function(){d.type="onHide",k=!1,h.trigger(d)}),c)):c},isShown:function(d){return d?"full"==k:k},getConf:function(){return b},getTip:function(){return e},getTrigger:function(){return a}}),f.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(d,g){f.isFunction(b[g])&&f(c).bind(g,b[g]),c[g]=function(o){return f(c).bind(g,o),c}})}f.tools=f.tools||{version:"1.2.3"},f.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,b,c){n[a]=[b,c]}};var n={toggle:[function(a){var b=this.getConf(),c=this.getTip();b=b.opacity,1>b&&c.css({opacity:b}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(a){var b=this.getConf();this.getTip().fadeTo(b.fadeInSpeed,b.opacity,a)},function(a){this.getTip().fadeOut(this.getConf().fadeOutSpeed,a)}]};f.fn.tooltip=function(a){var b=this.data("tooltip");return b?b:(a=f.extend(!0,{},f.tools.tooltip.conf,a),"string"==typeof a.position&&(a.position=a.position.split(/,?\s/)),this.each(function(){b=new t(f(this),a),f(this).data("tooltip",b)}),a.api?b:this)}}(jQuery),function(d){var i=d.tools.tooltip;d.extend(i.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!d.browser.msie});var e={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};i.addEffect("slide",function(g){var a=this.getConf(),f=this.getTip(),b=a.slideFade?{opacity:a.opacity}:{},c=e[a.direction]||e.up;b[c[1]]=c[0]+"="+a.slideOffset,a.slideFade&&f.css({opacity:0}),f.show().animate(b,a.slideInSpeed,g)},function(g){var a=this.getConf(),f=a.slideOffset,b=a.slideFade?{opacity:0}:{},c=e[a.direction]||e.up,h=""+c[0];a.bounce&&(h="+"==h?"-":"+"),b[c[1]]=h+"="+f,this.getTip().animate(b,a.slideOutSpeed,function(){d(this).hide(),g.call()})})}(jQuery),function(g){function j(a){var c=g(window),d=c.width()+c.scrollLeft(),h=c.height()+c.scrollTop();return[a.offset().top<=c.scrollTop(),a.offset().left+a.width()>=d,a.offset().top+a.height()>=h,c.scrollLeft()>=a.offset().left]
}function k(a){for(var c=a.length;c--;)if(a[c])return!1;return!0}var i=g.tools.tooltip;i.dynamic={conf:{classNames:"top right bottom left"}},g.fn.dynamic=function(a){"number"==typeof a&&(a={speed:a}),a=g.extend({},i.dynamic.conf,a);var d,c=a.classNames.split(/\s/);return this.each(function(){var h=g(this).tooltip().onBeforeShow(function(e,f){e=this.getTip();var b=this.getConf();d||(d=[b.position[0],b.position[1],b.offset[0],b.offset[1],g.extend({},b)]),g.extend(b,d[4]),b.position=[d[0],d[1]],b.offset=[d[2],d[3]],e.css({visibility:"hidden",position:"absolute",top:f.top,left:f.left}).show(),f=j(e),k(f)||(f[2]&&(g.extend(b,a.top),b.position[0]="top",e.addClass(c[0])),f[3]&&(g.extend(b,a.right),b.position[1]="right",e.addClass(c[1])),f[0]&&(g.extend(b,a.bottom),b.position[0]="bottom",e.addClass(c[2])),f[1]&&(g.extend(b,a.left),b.position[1]="left",e.addClass(c[3])),(f[0]||f[2])&&(b.offset[0]*=-1),(f[1]||f[3])&&(b.offset[1]*=-1)),e.css({visibility:"visible"}).hide()});h.onBeforeShow(function(){var e=this.getConf();this.getTip(),setTimeout(function(){e.position=[d[0],d[1]],e.offset=[d[2],d[3]]},0)}),h.onHide(function(){var e=this.getTip();e.removeClass(a.classNames)}),ret=h}),a.api?ret:this}}(jQuery),function(e){function n(f,c){var a=e(c);return 2>a.length?a:f.parent().find(c)}function t(f,c){var a=this,l=f.add(a),g=f.children(),k=0,m=c.vertical;if(j||(j=a),g.length>1&&(g=e(c.items,f)),e.extend(a,{getConf:function(){return c},getIndex:function(){return k},getSize:function(){return a.getItems().size()},getNaviButtons:function(){return o.add(p)},getRoot:function(){return f},getItemWrap:function(){return g},getItems:function(){return g.children(c.item).not("."+c.clonedClass)},move:function(b,d){return a.seekTo(k+b,d)},next:function(b){return a.move(1,b)},prev:function(b){return a.move(-1,b)},begin:function(b){return a.seekTo(0,b)},end:function(b){return a.seekTo(a.getSize()-1,b)},focus:function(){return j=a},addItem:function(b){return b=e(b),c.circular?(e(".cloned:last").before(b),e(".cloned:first").replaceWith(b.clone().addClass(c.clonedClass))):g.append(b),l.trigger("onAddItem",[b]),a},seekTo:function(b,d,h){if(c.circular&&0===b&&-1==k&&0!==d)return a;if(!c.circular&&0>b||b>a.getSize()||-1>b)return a;var i=b;b.jquery?b=a.getItems().index(b):i=a.getItems().eq(b);var q=e.Event("onBeforeSeek");return h||(l.trigger(q,[b,d]),!q.isDefaultPrevented()&&i.length)?(i=m?{top:-i.position().top}:{left:-i.position().left},k=b,j=a,void 0===d&&(d=c.speed),g.animate(i,d,c.easing,h||function(){l.trigger("onSeek",[b])}),a):a}}),e.each(["onBeforeSeek","onSeek","onAddItem"],function(b,d){e.isFunction(c[d])&&e(a).bind(d,c[d]),a[d]=function(h){return e(a).bind(d,h),a}}),c.circular){var r=a.getItems().slice(-1).clone().prependTo(g),s=a.getItems().eq(1).clone().appendTo(g);r.add(s).addClass(c.clonedClass),a.onBeforeSeek(function(b,d,h){if(!b.isDefaultPrevented()){if(-1==d)return a.seekTo(r,h,function(){a.end(0)}),b.preventDefault();d==a.getSize()&&a.seekTo(s,h,function(){a.begin(0)})}}),a.seekTo(0,0)}var o=n(f,c.prev).click(function(){a.prev()}),p=n(f,c.next).click(function(){a.next()});!c.circular&&a.getSize()>1&&a.onBeforeSeek(function(b,d){setTimeout(function(){b.isDefaultPrevented()||(o.toggleClass(c.disabledClass,0>=d),p.toggleClass(c.disabledClass,d>=a.getSize()-1))},1)}),c.mousewheel&&e.fn.mousewheel&&f.mousewheel(function(b,d){return c.mousewheel?(a.move(0>d?1:-1,c.wheelSpeed||50),!1):void 0}),c.keyboard&&e(document).bind("keydown.scrollable",function(b){if(!(!c.keyboard||b.altKey||b.ctrlKey||e(b.target).is(":input")||"static"!=c.keyboard&&j!=a)){var d=b.keyCode;if(m&&(38==d||40==d))return a.move(38==d?-1:1),b.preventDefault();if(!m&&(37==d||39==d))return a.move(37==d?-1:1),b.preventDefault()}}),e(a).trigger("onBeforeSeek",[c.initialIndex])}e.tools=e.tools||{version:"1.2.3"},e.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,vertical:!1,wheelSpeed:0}};var j;e.fn.scrollable=function(f){var c=this.data("scrollable");return c?c:(f=e.extend({},e.tools.scrollable.conf,f),this.each(function(){c=new t(e(this),f),e(this).data("scrollable",c)}),f.api?c:this)}}(jQuery),function(c){var g=c.tools.scrollable;g.autoscroll={conf:{autoplay:!0,interval:3e3,autopause:!0}},c.fn.autoscroll=function(d){"number"==typeof d&&(d={interval:d});var h,b=c.extend({},g.autoscroll.conf,d);return this.each(function(){var a=c(this).data("scrollable");a&&(h=a);var e,i,f=!0;a.play=function(){e||(f=!1,e=setInterval(function(){a.next()},b.interval),a.next())},a.pause=function(){e=clearInterval(e)},a.stop=function(){a.pause(),f=!0},b.autopause&&a.getRoot().add(a.getNaviButtons()).hover(function(){a.pause(),clearInterval(i)},function(){f||(i=setTimeout(a.play,b.interval))}),b.autoplay&&setTimeout(a.play,b.interval)}),b.api?h:this}}(jQuery),function(d){function p(c,g){var h=d(g);return 2>h.length?h:c.parent().find(g)}var m=d.tools.scrollable;m.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,history:!1}},d.fn.navigator=function(c){"string"==typeof c&&(c={navi:c}),c=d.extend({},m.navigator.conf,c);var g;return this.each(function(){function h(a,b,i){return e.seekTo(b),j?(location.hash&&(location.hash=a.attr("href").replace("#","")),void 0):i.preventDefault()}function f(){return k.find(c.naviItem||"> *")}function n(a){var b=d("<"+(c.naviItem||"a")+"/>").click(function(i){h(d(this),a,i)}).attr("href","#"+a);return 0===a&&b.addClass(l),c.indexed&&b.text(a+1),c.idPrefix&&b.attr("id",c.idPrefix+a),b.appendTo(k)}function o(a,b){a=f().eq(b.replace("#","")),a.length||(a=f().filter("[href="+b+"]")),a.click()}var e=d(this).data("scrollable"),k=p(e.getRoot(),c.navi),q=e.getNaviButtons(),l=c.activeClass,j=c.history&&d.fn.history;e&&(g=e),e.getNaviButtons=function(){return q.add(k)},f().length?f().each(function(a){d(this).click(function(b){h(d(this),a,b)})}):d.each(e.getItems(),function(a){n(a)}),e.onBeforeSeek(function(a,b){setTimeout(function(){if(!a.isDefaultPrevented()){var i=f().eq(b);!a.isDefaultPrevented()&&i.length&&f().removeClass(l).eq(b).addClass(l)}},1)}),e.onAddItem(function(a,b){b=n(e.getItems().index(b)),j&&b.history(o)}),j&&f().history(o)}),c.api?g:this}}(jQuery),function(a){function t(d,b){var k,f,m,c=this,i=d.add(c),o=a(window),g=a.tools.expose&&(b.mask||b.expose),n=(""+Math.random()).slice(10);g&&("string"==typeof g&&(g={color:g}),g.closeOnClick=g.closeOnEsc=!1);var p=b.target||d.attr("rel");if(f=p?a(p):d,!f.length)throw"Could not find Overlay: "+p;d&&-1==d.index(f)&&d.click(function(e){return c.load(e),e.preventDefault()}),a.extend(c,{load:function(e){if(c.isOpened())return c;var h=q[b.effect];if(!h)throw'Overlay: cannot find effect : "'+b.effect+'"';if(b.oneInstance&&a.each(s,function(){this.close(e)}),e=e||a.Event(),e.type="onBeforeLoad",i.trigger(e),e.isDefaultPrevented())return c;m=!0,g&&a(f).expose(g);var j=b.top,r=b.left,u=f.outerWidth({margin:!0}),v=f.outerHeight({margin:!0});return"string"==typeof j&&(j="center"==j?Math.max((o.height()-v)/2,0):parseInt(j,10)/100*o.height()),"center"==r&&(r=Math.max((o.width()-u)/2,0)),h[0].call(c,{top:j,left:r},function(){m&&(e.type="onLoad",i.trigger(e))}),g&&b.closeOnClick&&a.mask.getMask().one("click",c.close),b.closeOnClick&&a(document).bind("click."+n,function(l){a(l.target).parents(f).length||c.close(l)}),b.closeOnEsc&&a(document).bind("keydown."+n,function(l){27==l.keyCode&&c.close(l)}),c},close:function(e){return c.isOpened()?(e=e||a.Event(),e.type="onBeforeClose",i.trigger(e),e.isDefaultPrevented()?void 0:(m=!1,q[b.effect][1].call(c,function(){e.type="onClose",i.trigger(e)}),a(document).unbind("click."+n).unbind("keydown."+n),g&&a.mask.close(),c)):c},getOverlay:function(){return f},getTrigger:function(){return d},getClosers:function(){return k},isOpened:function(){return m},getConf:function(){return b}}),a.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(e,h){a.isFunction(b[h])&&a(c).bind(h,b[h]),c[h]=function(j){return a(c).bind(h,j),c}}),k=f.find(b.close||".close"),k.length||b.close||(k=a('<a class="close"></a>'),f.prepend(k)),k.click(function(e){c.close(e)}),b.load&&c.load()}a.tools=a.tools||{version:"1.2.3"},a.tools.overlay={addEffect:function(d,b,c){q[d]=[b,c]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!a.browser.msie||a.browser.version>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var s=[],q={};a.tools.overlay.addEffect("default",function(d,b){var c=this.getConf(),i=a(window);c.fixed||(d.top+=i.scrollTop(),d.left+=i.scrollLeft()),d.position=c.fixed?"fixed":"absolute",this.getOverlay().css(d).fadeIn(c.speed,b)},function(d){this.getOverlay().fadeOut(this.getConf().closeSpeed,d)}),a.fn.overlay=function(d){var b=this.data("overlay");return b?b:(a.isFunction(d)&&(d={onBeforeLoad:d}),d=a.extend(!0,{},a.tools.overlay.conf,d),this.each(function(){b=new t(a(this),d),s.push(b),a(this).data("overlay",b)}),d.api?b:this)}}(jQuery),function(i){function j(b){var d=b.offset();return{top:d.top+b.height()/2,left:d.left+b.width()/2}}function n(b,d){var a=this.getOverlay(),c=this.getConf(),g=this.getTrigger(),o=this,l=a.outerWidth({margin:!0}),h=a.data("img");if(!h){var e=a.css("backgroundImage");if(!e)throw"background-image CSS property not set for overlay";e=e.slice(e.indexOf("(")+1,e.indexOf(")")).replace(/\"/g,""),a.css("backgroundImage","none"),h=i('<img src="'+e+'"/>'),h.css({border:0,display:"none"}).width(l),i("body").append(h),a.data("img",h)}e=c.start.top||Math.round(f.height()/2);var m=c.start.left||Math.round(f.width()/2);g&&(g=j(g),e=g.top,m=g.left),h.css({position:"absolute",top:e,left:m,width:0,zIndex:c.zIndex}).show(),b.top+=f.scrollTop(),b.left+=f.scrollLeft(),b.position="absolute",a.css(b),h.animate({top:a.css("top"),left:a.css("left"),width:l},c.speed,function(){c.fixed&&(b.top-=f.scrollTop(),b.left-=f.scrollLeft(),b.position="fixed",h.add(a).css(b)),a.css("zIndex",c.zIndex+1).fadeIn(c.fadeInSpeed,function(){o.isOpened()&&!i(this).index(a)?d.call():a.hide()})})}function p(b){var d=this.getOverlay().hide(),a=this.getConf(),c=this.getTrigger();d=d.data("img");var g={top:a.start.top,left:a.start.left,width:0};c&&i.extend(g,j(c)),a.fixed&&d.css({position:"absolute"}).animate({top:"+="+f.scrollTop(),left:"+="+f.scrollLeft()},0),d.animate(g,a.closeSpeed,b)}var k=i.tools.overlay,f=i(window);i.extend(k.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999}),k.addEffect("apple",n,p)}(jQuery),function(){function f(a,b){if(b)for(key in b)b.hasOwnProperty(key)&&(a[key]=b[key]);return a}function l(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d]));return c}function m(a,b,c){if(e.isSupported(b.version))a.innerHTML=e.getHTML(b,c);else if(b.expressInstall&&e.isSupported([6,65]))a.innerHTML=e.getHTML(f(b,{src:b.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(a.innerHTML.replace(/\s/g,"")||(a.innerHTML="<h2>Flash version "+b.version+" or greater is required</h2><h3>"+(g[0]>0?"Your version is "+g:"You have no flash plugin installed")+"</h3>"+("A"==a.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+k+"'>here</a></p>"),"A"==a.tagName&&(a.onclick=function(){location.href=k})),b.onFail){var d=b.onFail.call(this);"string"==typeof d&&(a.innerHTML=d)}h&&(window[b.id]=document.getElementById(b.id)),f(this,{getRoot:function(){return a},getOptions:function(){return b},getConf:function(){return c},getApi:function(){return a.firstChild}})}var h=document.all,k="http://www.adobe.com/go/getflashplayer",n="function"==typeof jQuery,o=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,i={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a.replace("#",""))),a?("string"==typeof b&&(b={src:b}),new m(a,f(f({},i),b),c)):void 0};var e=f(window.flashembed,{conf:i,getVersion:function(){var a;try{a=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(b){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");a=c&&c.GetVariable("$version")}catch(d){}}return(a=o.exec(a))?[a[1],a[3]]:[0,0]},asString:function(a){if(null===a||void 0===a)return null;var b=typeof a;switch("object"==b&&a.push&&(b="array"),b){case"string":return a=a.replace(RegExp('(["\\\\])',"g"),"\\$1"),a=a.replace(/^\s?(\d+\.?\d+)%/,"$1pct"),'"'+a+'"';case"array":return"["+l(a,function(d){return e.asString(d)}).join(",")+"]";case"function":return'"function()"';case"object":b=[];for(var c in a)a.hasOwnProperty(c)&&b.push('"'+c+'":'+e.asString(a[c]));return"{"+b.join(",")+"}"}return(a+"").replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(a,b){a=f({},a);var c='<object width="'+a.width+'" height="'+a.height+'" id="'+a.id+'" name="'+a.id+'"';a.cachebusting&&(a.src+=(-1!=a.src.indexOf("?")?"&":"?")+Math.random()),c+=a.w3c||!h?' data="'+a.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',c+=">",(a.w3c||h)&&(c+='<param name="movie" value="'+a.src+'" />'),a.width=a.height=a.id=a.w3c=a.src=null,a.onFail=a.version=a.expressInstall=null;for(var d in a)a[d]&&(c+='<param name="'+d+'" value="'+a[d]+'" />');if(a="",b){for(var j in b)b[j]&&(d=b[j],a+=j+"="+(/function|object/.test(typeof d)?e.asString(d):d)+"&");a=a.slice(0,-1),c+='<param name="flashvars" value=\''+a+"' />"}return c+="</object>"},isSupported:function(a){return g[0]>a[0]||g[0]==a[0]&&g[1]>=a[1]}}),g=e.getVersion();n&&(jQuery.tools=jQuery.tools||{version:"1.2.3"},jQuery.tools.flashembed={conf:i},jQuery.fn.flashembed=function(a,b){return this.each(function(){$(this).data("flashembed",flashembed(this,a,b))})})}(),function(b){function h(c){if(c){var a=d.contentWindow.document;a.open().close(),a.location.hash=c}}var g,d,f,i;b.tools=b.tools||{version:"1.2.3"},b.tools.history={init:function(c){i||(b.browser.msie&&"8">b.browser.version?d||(d=b("<iframe/>").attr("src","javascript:false;").hide().get(0),b("body").append(d),setInterval(function(){var a=d.contentWindow.document;a=a.location.hash,g!==a&&b.event.trigger("hash",a)},100),h(location.hash||"#")):setInterval(function(){var a=location.hash;a!==g&&b.event.trigger("hash",a)},100),f=f?f.add(c):c,c.click(function(a){var e=b(this).attr("href");return d&&h(e),"#"!=e.slice(0,1)?(location.href="#"+e,a.preventDefault()):void 0}),i=!0)}},b(window).bind("hash",function(c,a){a?f.filter(function(){var e=b(this).attr("href");return e==a||e==a.replace("#","")}).trigger("history",[a]):f.eq(0).trigger("history",[a]),g=a,window.location.hash=g}),b.fn.history=function(c){return b.tools.history.init(this),this.bind("history",c)}}(jQuery),function(b){function k(){if(b.browser.msie){var a=b(document).height(),d=b(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,20>a-d?d:a]}return[b(document).width(),b(document).height()]}function h(a){return a?a.call(b.mask):void 0}b.tools=b.tools||{version:"1.2.3"};var l;l=b.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var c,i,f,g,j;b.mask={load:function(a,d){if(f)return this;"string"==typeof a&&(a={color:a}),a=a||g,g=a=b.extend(b.extend({},l.conf),a),c=b("#"+a.maskId),c.length||(c=b("<div/>").attr("id",a.maskId),b("body").append(c));var m=k();return c.css({position:"absolute",top:0,left:0,width:m[0],height:m[1],display:"none",opacity:a.startOpacity,zIndex:a.zIndex}),a.color&&c.css("backgroundColor",a.color),h(a.onBeforeLoad)===!1?this:(a.closeOnEsc&&b(document).bind("keydown.mask",function(e){27==e.keyCode&&b.mask.close(e)}),a.closeOnClick&&c.bind("click.mask",function(e){b.mask.close(e)}),b(window).bind("resize.mask",function(){b.mask.fit()}),d&&d.length&&(j=d.eq(0).css("zIndex"),b.each(d,function(){var e=b(this);/relative|absolute|fixed/i.test(e.css("position"))||e.css("position","relative")}),i=d.css({zIndex:Math.max(a.zIndex+1,"auto"==j?0:j)})),c.css({display:"block"}).fadeTo(a.loadSpeed,a.opacity,function(){b.mask.fit(),h(a.onLoad)}),f=!0,this)},close:function(){if(f){if(h(g.onBeforeClose)===!1)return this;c.fadeOut(g.closeSpeed,function(){h(g.onClose),i&&i.css({zIndex:j})}),b(document).unbind("keydown.mask"),c.unbind("click.mask"),b(window).unbind("resize.mask"),f=!1}return this},fit:function(){if(f){var a=k();c.css({width:a[0],height:a[1]})}},getMask:function(){return c},isLoaded:function(){return f},getConf:function(){return g},getExposed:function(){return i}},b.fn.mask=function(a){return b.mask.load(a),this},b.fn.expose=function(a){return b.mask.load(a,this),this}}(jQuery),function(b){function c(a){switch(a.type){case"mousemove":return b.extend(a.data,{clientX:a.clientX,clientY:a.clientY,pageX:a.pageX,pageY:a.pageY});case"DOMMouseScroll":b.extend(a,a.data),a.delta=-a.detail/3;break;case"mousewheel":a.delta=a.wheelDelta/120}return a.type="wheel",b.event.handle.call(this,a,a.delta)}b.fn.mousewheel=function(a){return this[a?"bind":"trigger"]("wheel",a)},b.event.special.wheel={setup:function(){b.event.add(this,d,c,{})},teardown:function(){b.event.remove(this,d,c)}};var d=b.browser.mozilla?"DOMMouseScroll"+("1.9">b.browser.version?" mousemove":""):"mousewheel"}(jQuery),function($){function div(){return $("<div/>")}var abs=Math.abs,max=Math.max,min=Math.min,round=Math.round;$.imgAreaSelect=function(img,options){function viewX(x){return x+imgOfs.left-parOfs.left}function viewY(y){return y+imgOfs.top-parOfs.top}function selX(x){return x-imgOfs.left+parOfs.left}function selY(y){return y-imgOfs.top+parOfs.top}function evX(event){return event.pageX-parOfs.left}function evY(event){return event.pageY-parOfs.top}function getSelection(noScale){var sx=noScale||scaleX,sy=noScale||scaleY;return{x1:round(selection.x1*sx),y1:round(selection.y1*sy),x2:round(selection.x2*sx),y2:round(selection.y2*sy),width:round(selection.x2*sx)-round(selection.x1*sx),height:round(selection.y2*sy)-round(selection.y1*sy)}}function setSelection(x1,y1,x2,y2,noScale){var sx=noScale||scaleX,sy=noScale||scaleY;selection={x1:round(x1/sx),y1:round(y1/sy),x2:round(x2/sx),y2:round(y2/sy)},selection.width=selection.x2-selection.x1,selection.height=selection.y2-selection.y1}function adjust(){$img.width()&&(imgOfs={left:round($img.offset().left),top:round($img.offset().top)},imgWidth=$img.width(),imgHeight=$img.height(),minWidth=options.minWidth||0,minHeight=options.minHeight||0,maxWidth=min(options.maxWidth||1<<24,imgWidth),maxHeight=min(options.maxHeight||1<<24,imgHeight),"1.3.2"!=$().jquery||"fixed"!=position||docElem.getBoundingClientRect||(imgOfs.top+=max(document.body.scrollTop,docElem.scrollTop),imgOfs.left+=max(document.body.scrollLeft,docElem.scrollLeft)),parOfs=$.inArray($parent.css("position"),["absolute","relative"])+1?{left:round($parent.offset().left)-$parent.scrollLeft(),top:round($parent.offset().top)-$parent.scrollTop()}:"fixed"==position?{left:$(document).scrollLeft(),top:$(document).scrollTop()}:{left:0,top:0},left=viewX(0),top=viewY(0),(selection.x2>imgWidth||selection.y2>imgHeight)&&doResize())}function update(resetKeyPress){if(shown){switch($box.css({left:viewX(selection.x1),top:viewY(selection.y1)}).add($area).width(w=selection.width).height(h=selection.height),$area.add($border).add($handles).css({left:0,top:0}),$border.width(max(w-$border.outerWidth()+$border.innerWidth(),0)).height(max(h-$border.outerHeight()+$border.innerHeight(),0)),$($outer[0]).css({left:left,top:top,width:selection.x1,height:imgHeight}),$($outer[1]).css({left:left+selection.x1,top:top,width:w,height:selection.y1}),$($outer[2]).css({left:left+selection.x2,top:top,width:imgWidth-selection.x2,height:imgHeight}),$($outer[3]).css({left:left+selection.x1,top:top+selection.y2,width:w,height:imgHeight-selection.y2}),w-=$handles.outerWidth(),h-=$handles.outerHeight(),$handles.length){case 8:$($handles[4]).css({left:w/2}),$($handles[5]).css({left:w,top:h/2}),$($handles[6]).css({left:w/2,top:h}),$($handles[7]).css({top:h/2});case 4:$handles.slice(1,3).css({left:w}),$handles.slice(2,4).css({top:h})}resetKeyPress!==!1&&($.imgAreaSelect.keyPress!=docKeyPress&&$(document).unbind($.imgAreaSelect.keyPress,$.imgAreaSelect.onKeyPress),options.keys&&$(document)[$.imgAreaSelect.keyPress]($.imgAreaSelect.onKeyPress=docKeyPress)),$.browser.msie&&2==$border.outerWidth()-$border.innerWidth()&&($border.css("margin",0),setTimeout(function(){$border.css("margin","auto")},0))}}function doUpdate(resetKeyPress){adjust(),update(resetKeyPress),x1=viewX(selection.x1),y1=viewY(selection.y1),x2=viewX(selection.x2),y2=viewY(selection.y2)}function hide($elem,fn){options.fadeSpeed?$elem.fadeOut(options.fadeSpeed,fn):$elem.hide()}function areaMouseMove(event){var x=selX(evX(event))-selection.x1,y=selY(evY(event))-selection.y1;adjusted||(adjust(),adjusted=!0,$box.one("mouseout",function(){adjusted=!1})),resize="",options.resizable&&(resizeMargin>=y?resize="n":y>=selection.height-resizeMargin&&(resize="s"),resizeMargin>=x?resize+="w":x>=selection.width-resizeMargin&&(resize+="e")),$box.css("cursor",resize?resize+"-resize":options.movable?"move":""),$areaOpera&&$areaOpera.toggle()}function docMouseUp(){$("body").css("cursor",""),(options.autoHide||0==selection.width*selection.height)&&hide($box.add($outer),function(){$(this).hide()}),options.onSelectEnd(img,getSelection()),$(document).unbind("mousemove",selectingMouseMove),$box.mousemove(areaMouseMove)}function areaMouseDown(event){return 1!=event.which?!1:(adjust(),resize?($("body").css("cursor",resize+"-resize"),x1=viewX(selection[/w/.test(resize)?"x2":"x1"]),y1=viewY(selection[/n/.test(resize)?"y2":"y1"]),$(document).mousemove(selectingMouseMove).one("mouseup",docMouseUp),$box.unbind("mousemove",areaMouseMove)):options.movable?(startX=left+selection.x1-evX(event),startY=top+selection.y1-evY(event),$box.unbind("mousemove",areaMouseMove),$(document).mousemove(movingMouseMove).one("mouseup",function(){options.onSelectEnd(img,getSelection()),$(document).unbind("mousemove",movingMouseMove),$box.mousemove(areaMouseMove)})):$img.mousedown(event),!1)}function fixAspectRatio(xFirst){aspectRatio&&(xFirst?(x2=max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1))),y2=round(max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1)))),x2=round(x2)):(y2=max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1))),x2=round(max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1)))),y2=round(y2)))}function doResize(){x1=min(x1,left+imgWidth),y1=min(y1,top+imgHeight),minWidth>abs(x2-x1)&&(x2=x1-minWidth*(x1>x2||-1),left>x2?x1=left+minWidth:x2>left+imgWidth&&(x1=left+imgWidth-minWidth)),minHeight>abs(y2-y1)&&(y2=y1-minHeight*(y1>y2||-1),top>y2?y1=top+minHeight:y2>top+imgHeight&&(y1=top+imgHeight-minHeight)),x2=max(left,min(x2,left+imgWidth)),y2=max(top,min(y2,top+imgHeight)),fixAspectRatio(abs(x2-x1)<abs(y2-y1)*aspectRatio),abs(x2-x1)>maxWidth&&(x2=x1-maxWidth*(x1>x2||-1),fixAspectRatio()),abs(y2-y1)>maxHeight&&(y2=y1-maxHeight*(y1>y2||-1),fixAspectRatio(!0)),selection={x1:selX(min(x1,x2)),x2:selX(max(x1,x2)),y1:selY(min(y1,y2)),y2:selY(max(y1,y2)),width:abs(x2-x1),height:abs(y2-y1)},update(),options.onSelectChange(img,getSelection())}function selectingMouseMove(event){return x2=""==resize||/w|e/.test(resize)||aspectRatio?evX(event):viewX(selection.x2),y2=""==resize||/n|s/.test(resize)||aspectRatio?evY(event):viewY(selection.y2),doResize(),!1}function doMove(newX1,newY1){x2=(x1=newX1)+selection.width,y2=(y1=newY1)+selection.height,$.extend(selection,{x1:selX(x1),y1:selY(y1),x2:selX(x2),y2:selY(y2)}),update(),options.onSelectChange(img,getSelection())}function movingMouseMove(event){return x1=max(left,min(startX+evX(event),left+imgWidth-selection.width)),y1=max(top,min(startY+evY(event),top+imgHeight-selection.height)),doMove(x1,y1),event.preventDefault(),!1}function startSelection(){adjust(),x2=x1,y2=y1,doResize(),resize="",$outer.is(":not(:visible)")&&$box.add($outer).hide().fadeIn(options.fadeSpeed||0),shown=!0,$(document).unbind("mouseup",cancelSelection).mousemove(selectingMouseMove).one("mouseup",docMouseUp),$box.unbind("mousemove",areaMouseMove),options.onSelectStart(img,getSelection())}function cancelSelection(){$(document).unbind("mousemove",startSelection),hide($box.add($outer)),selection={x1:selX(x1),y1:selY(y1),x2:selX(x1),y2:selY(y1),width:0,height:0},options.onSelectChange(img,getSelection()),options.onSelectEnd(img,getSelection())}function imgMouseDown(event){return 1!=event.which||$outer.is(":animated")?!1:(adjust(),startX=x1=evX(event),startY=y1=evY(event),$(document).one("mousemove",startSelection).one("mouseup",cancelSelection),!1)}function windowResize(){doUpdate(!1)}function imgLoad(){imgLoaded=!0,setOptions(options=$.extend({classPrefix:"imgareaselect",movable:!0,resizable:!0,parent:"body",onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},options)),$box.add($outer).css({visibility:""}),options.show&&(shown=!0,adjust(),update(),$box.add($outer).hide().fadeIn(options.fadeSpeed||0)),setTimeout(function(){options.onInit(img,getSelection())},0)}function styleOptions($elem,props){for(option in props)void 0!==options[option]&&$elem.css(props[option],options[option])}function setOptions(newOptions){if(newOptions.parent&&($parent=$(newOptions.parent)).append($box.add($outer)),$.extend(options,newOptions),adjust(),null!=newOptions.handles){for($handles.remove(),$handles=$([]),i=newOptions.handles?"corners"==newOptions.handles?4:8:0;i--;)$handles=$handles.add(div());$handles.addClass(options.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:zIndex+1||1}),!parseInt($handles.css("width"))>=0&&$handles.width(5).height(5),(o=options.borderWidth)&&$handles.css({borderWidth:o,borderStyle:"solid"}),styleOptions($handles,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}for(scaleX=options.imageWidth/imgWidth||1,scaleY=options.imageHeight/imgHeight||1,null!=newOptions.x1&&(setSelection(newOptions.x1,newOptions.y1,newOptions.x2,newOptions.y2),newOptions.show=!newOptions.hide),newOptions.keys&&(options.keys=$.extend({shift:1,ctrl:"resize"},newOptions.keys)),$outer.addClass(options.classPrefix+"-outer"),$area.addClass(options.classPrefix+"-selection"),i=0;4>i++;)$($border[i-1]).addClass(options.classPrefix+"-border"+i);styleOptions($area,{selectionColor:"background-color",selectionOpacity:"opacity"}),styleOptions($border,{borderOpacity:"opacity",borderWidth:"border-width"}),styleOptions($outer,{outerColor:"background-color",outerOpacity:"opacity"}),(o=options.borderColor1)&&$($border[0]).css({borderStyle:"solid",borderColor:o}),(o=options.borderColor2)&&$($border[1]).css({borderStyle:"dashed",borderColor:o}),$box.append($area.add($border).add($handles).add($areaOpera)),$.browser.msie&&((o=$outer.css("filter").match(/opacity=([0-9]+)/))&&$outer.css("opacity",o[1]/100),(o=$border.css("filter").match(/opacity=([0-9]+)/))&&$border.css("opacity",o[1]/100)),newOptions.hide?hide($box.add($outer)):newOptions.show&&imgLoaded&&(shown=!0,$box.add($outer).fadeIn(options.fadeSpeed||0),doUpdate()),aspectRatio=(d=(options.aspectRatio||"").split(/:/))[0]/d[1],$img.add($outer).unbind("mousedown",imgMouseDown),options.disable||options.enable===!1?($box.unbind("mousemove",areaMouseMove).unbind("mousedown",areaMouseDown),$(window).unbind("resize",windowResize)):((options.enable||options.disable===!1)&&((options.resizable||options.movable)&&$box.mousemove(areaMouseMove).mousedown(areaMouseDown),$(window).resize(windowResize)),options.persistent||$img.add($outer).mousedown(imgMouseDown)),options.enable=options.disable=void 0}var imgLoaded,$areaOpera,left,top,imgOfs,imgWidth,imgHeight,$parent,parOfs,startX,startY,scaleX,scaleY,resize,minWidth,minHeight,maxWidth,maxHeight,aspectRatio,shown,x1,y1,x2,y2,$p,d,i,o,w,h,adjusted,$img=$(img),$box=div(),$area=div(),$border=div().add(div()).add(div()).add(div()),$outer=div().add(div()).add(div()).add(div()),$handles=$([]),zIndex=0,position="absolute",resizeMargin=10,selection={x1:0,y1:0,x2:0,y2:0,width:0,height:0},docElem=document.documentElement,docKeyPress=function(event){var d,t,k=options.keys,key=event.keyCode;if(d=isNaN(k.alt)||!event.altKey&&!event.originalEvent.altKey?!isNaN(k.ctrl)&&event.ctrlKey?k.ctrl:!isNaN(k.shift)&&event.shiftKey?k.shift:isNaN(k.arrows)?10:k.arrows:k.alt,"resize"==k.arrows||"resize"==k.shift&&event.shiftKey||"resize"==k.ctrl&&event.ctrlKey||"resize"==k.alt&&(event.altKey||event.originalEvent.altKey)){switch(key){case 37:d=-d;case 39:t=max(x1,x2),x1=min(x1,x2),x2=max(t+d,x1),fixAspectRatio();break;case 38:d=-d;case 40:t=max(y1,y2),y1=min(y1,y2),y2=max(t+d,y1),fixAspectRatio(!0);break;default:return}doResize()}else switch(x1=min(x1,x2),y1=min(y1,y2),key){case 37:doMove(max(x1-d,left),y1);break;case 38:doMove(x1,max(y1-d,top));break;case 39:doMove(x1+min(d,imgWidth-selX(x2)),y1);break;case 40:doMove(x1,y1+min(d,imgHeight-selY(y2)));break;default:return}return!1};for(this.remove=function(){$img.unbind("mousedown",imgMouseDown),$box.add($outer).remove()},this.getOptions=function(){return options},this.setOptions=setOptions,this.getSelection=getSelection,this.setSelection=setSelection,this.update=doUpdate,$p=$img;$p.length;)zIndex=max(zIndex,isNaN($p.css("z-index"))?zIndex:$p.css("z-index")),"fixed"==$p.css("position")&&(position="fixed"),$p=$p.parent(":not(body)");zIndex=options.zIndex||zIndex,$.browser.msie&&$img.attr("unselectable","on"),$.imgAreaSelect.keyPress=$.browser.msie||$.browser.safari?"keydown":"keypress",$.browser.opera&&($areaOpera=div().css({width:"100%",height:"100%",position:"absolute",zIndex:zIndex+2||2})),$box.add($outer).css({visibility:"hidden",position:position,overflow:"hidden",zIndex:zIndex||"0"}),$box.css({zIndex:zIndex+2||2}),$area.add($border).css({position:"absolute",fontSize:0}),img.complete||"complete"==img.readyState||!$img.is("img")?imgLoad():$img.one("load",imgLoad)},$.fn.imgAreaSelect=function(options){return options=options||{},this.each(function(){$(this).data("imgAreaSelect")?options.remove?($(this).data("imgAreaSelect").remove(),$(this).removeData("imgAreaSelect")):$(this).data("imgAreaSelect").setOptions(options):options.remove||(void 0===options.enable&&void 0===options.disable&&(options.enable=!0),$(this).data("imgAreaSelect",new $.imgAreaSelect(this,options)))}),options.instance?$(this).data("imgAreaSelect"):this}}(jQuery),function($){$.isScrollToFixed=function(el){return void 0!==$(el).data("ScrollToFixed")},$.ScrollToFixed=function(el,options){function resetScroll(){target.trigger("preUnfixed.ScrollToFixed"),setUnfixed(),target.trigger("unfixed.ScrollToFixed"),lastOffsetLeft=-1,offsetTop=target.offset().top,offsetLeft=target.offset().left,base.options.offsets&&(offsetLeft+=target.offset().left-target.position().left),-1==originalOffsetLeft&&(originalOffsetLeft=offsetLeft),position=target.css("position"),isReset=!0,-1!=base.options.bottom&&(target.trigger("preFixed.ScrollToFixed"),setFixed(),target.trigger("fixed.ScrollToFixed"))}function getLimit(){var limit=base.options.limit;return limit?"function"==typeof limit?limit.apply(target):limit:0}function isFixed(){return"fixed"===position}function isAbsolute(){return"absolute"===position}function isUnfixed(){return!(isFixed()||isAbsolute())}function setFixed(){isFixed()||(spacer.css({display:target.css("display"),width:target.outerWidth(!0),height:target.outerHeight(!0),"float":target.css("float")}),target.css({width:target.width(),position:"fixed",top:-1==base.options.bottom?getMarginTop():"",bottom:-1==base.options.bottom?"":base.options.bottom,"margin-left":"0px"}),target.addClass("scroll-to-fixed-fixed"),base.options.className&&target.addClass(base.options.className),position="fixed")
}function setAbsolute(){var top=getLimit(),left=offsetLeft;base.options.removeOffsets&&(left=0,top-=offsetTop),target.css({width:target.width(),position:"absolute",top:top,left:left,"margin-left":"0px",bottom:""}),position="absolute"}function setUnfixed(){isUnfixed()||(lastOffsetLeft=-1,spacer.css("display","none"),target.css({width:"",position:originalPosition,left:"",top:"","margin-left":""}),target.removeClass("scroll-to-fixed-fixed"),base.options.className&&target.removeClass(base.options.className),position=null)}function setLeft(x){x!=lastOffsetLeft&&(target.css("left",offsetLeft-x),lastOffsetLeft=x)}function getMarginTop(){var marginTop=base.options.marginTop;return marginTop?"function"==typeof marginTop?marginTop.apply(target):marginTop:0}function checkScroll(){if($.isScrollToFixed(target)){var wasReset=isReset;isReset||resetScroll();var x=$(window).scrollLeft(),y=$(window).scrollTop(),limit=getLimit();base.options.minWidth&&$(window).width()<base.options.minWidth?isUnfixed()&&wasReset||(postPosition(),target.trigger("preUnfixed.ScrollToFixed"),setUnfixed(),target.trigger("unfixed.ScrollToFixed")):-1==base.options.bottom?limit>0&&y>=limit-getMarginTop()?isAbsolute()&&wasReset||(postPosition(),target.trigger("preAbsolute.ScrollToFixed"),setAbsolute(),target.trigger("unfixed.ScrollToFixed")):y>=offsetTop-getMarginTop()?(isFixed()&&wasReset||(postPosition(),target.trigger("preFixed.ScrollToFixed"),setFixed(),lastOffsetLeft=-1,target.trigger("fixed.ScrollToFixed")),setLeft(x)):isUnfixed()&&wasReset||(postPosition(),target.trigger("preUnfixed.ScrollToFixed"),setUnfixed(),target.trigger("unfixed.ScrollToFixed")):limit>0?y+$(window).height()-target.outerHeight(!0)>=limit-(getMarginTop()||-getBottom())?isFixed()&&(postPosition(),target.trigger("preUnfixed.ScrollToFixed"),"absolute"===originalPosition?setAbsolute():setUnfixed(),target.trigger("unfixed.ScrollToFixed")):(isFixed()||(postPosition(),target.trigger("preFixed.ScrollToFixed"),setFixed()),setLeft(x),target.trigger("fixed.ScrollToFixed")):setLeft(x)}}function getBottom(){return base.options.bottom?base.options.bottom:0}function postPosition(){var position=target.css("position");"absolute"==position?target.trigger("postAbsolute.ScrollToFixed"):"fixed"==position?target.trigger("postFixed.ScrollToFixed"):target.trigger("postUnfixed.ScrollToFixed")}var base=this;base.$el=$(el),base.el=el,base.$el.data("ScrollToFixed",base);var position,originalPosition,originalOffset,isReset=!1,target=base.$el,offsetTop=0,offsetLeft=0,originalOffsetLeft=-1,lastOffsetLeft=-1,spacer=null,windowResize=function(){target.is(":visible")&&(isReset=!1,checkScroll())},windowScroll=function(){checkScroll()},preventDefault=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};base.init=function(){base.options=$.extend({},$.ScrollToFixed.defaultOptions,options),base.$el.css("z-index",base.options.zIndex),spacer=$("<div />"),position=target.css("position"),originalPosition=target.css("position"),originalOffset=$.extend({},target.offset()),isUnfixed()&&base.$el.after(spacer),$(window).bind("resize.ScrollToFixed",windowResize),$(window).bind("scroll.ScrollToFixed",windowScroll),base.options.preFixed&&target.bind("preFixed.ScrollToFixed",base.options.preFixed),base.options.postFixed&&target.bind("postFixed.ScrollToFixed",base.options.postFixed),base.options.preUnfixed&&target.bind("preUnfixed.ScrollToFixed",base.options.preUnfixed),base.options.postUnfixed&&target.bind("postUnfixed.ScrollToFixed",base.options.postUnfixed),base.options.preAbsolute&&target.bind("preAbsolute.ScrollToFixed",base.options.preAbsolute),base.options.postAbsolute&&target.bind("postAbsolute.ScrollToFixed",base.options.postAbsolute),base.options.fixed&&target.bind("fixed.ScrollToFixed",base.options.fixed),base.options.unfixed&&target.bind("unfixed.ScrollToFixed",base.options.unfixed),base.options.spacerClass&&spacer.addClass(base.options.spacerClass),target.bind("resize.ScrollToFixed",function(){spacer.height(target.height())}),target.bind("scroll.ScrollToFixed",function(){target.trigger("preUnfixed.ScrollToFixed"),setUnfixed(),target.trigger("unfixed.ScrollToFixed"),checkScroll()}),target.bind("detach.ScrollToFixed",function(ev){preventDefault(ev),target.trigger("preUnfixed.ScrollToFixed"),setUnfixed(),target.trigger("unfixed.ScrollToFixed"),$(window).unbind("resize.ScrollToFixed",windowResize),$(window).unbind("scroll.ScrollToFixed",windowScroll),target.unbind(".ScrollToFixed"),base.$el.removeData("ScrollToFixed")}),windowResize()},base.init()},$.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3},$.fn.scrollToFixed=function(options){return this.each(function(){new $.ScrollToFixed(this,options)})}}(jQuery),function($,window,document,undefined){var $window=$(window);$.fn.lazyload=function(options){function update(){var counter=0;elements.each(function(){var $this=$(this);if(!settings.skip_invisible||$this.is(":visible"))if($.abovethetop(this,settings)||$.leftofbegin(this,settings));else if($.belowthefold(this,settings)||$.rightoffold(this,settings)){if(++counter>settings.failure_limit)return!1}else $this.trigger("appear"),counter=0})}var $container,elements=this,settings={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return options&&(undefined!==options.failurelimit&&(options.failure_limit=options.failurelimit,delete options.failurelimit),undefined!==options.effectspeed&&(options.effect_speed=options.effectspeed,delete options.effectspeed),$.extend(settings,options)),$container=settings.container===undefined||settings.container===window?$window:$(settings.container),0===settings.event.indexOf("scroll")&&$container.bind(settings.event,function(){return update()}),this.each(function(){var self=this,$self=$(self);self.loaded=!1,$self.one("appear",function(){if(!this.loaded){if(settings.appear){var elements_left=elements.length;settings.appear.call(self,elements_left,settings)}$("<img />").bind("load",function(){$self.hide().attr("src",$self.data(settings.data_attribute))[settings.effect](settings.effect_speed),self.loaded=!0;var temp=$.grep(elements,function(element){return!element.loaded});if(elements=$(temp),settings.load){var elements_left=elements.length;settings.load.call(self,elements_left,settings)}}).attr("src",$self.data(settings.data_attribute))}}),0!==settings.event.indexOf("scroll")&&$self.bind(settings.event,function(){self.loaded||$self.trigger("appear")})}),$window.bind("resize",function(){update()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&$window.bind("pageshow",function(event){event.originalEvent.persisted&&elements.each(function(){$(this).trigger("appear")})}),$(window).load(function(){update()}),this},$.belowthefold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.height()+$window.scrollTop():$(settings.container).offset().top+$(settings.container).height(),$(element).offset().top-settings.threshold>=fold},$.rightoffold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.width()+$window.scrollLeft():$(settings.container).offset().left+$(settings.container).width(),$(element).offset().left-settings.threshold>=fold},$.abovethetop=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollTop():$(settings.container).offset().top,fold>=$(element).offset().top+settings.threshold+$(element).height()},$.leftofbegin=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollLeft():$(settings.container).offset().left,fold>=$(element).offset().left+settings.threshold+$(element).width()},$.inviewport=function(element,settings){return!($.rightoffold(element,settings)||$.leftofbegin(element,settings)||$.belowthefold(element,settings)||$.abovethetop(element,settings))},$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0})},"in-viewport":function(a){return $.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0})}})}(jQuery,window,document);